import{a as ae,b as F,d as P,c as T,r as I,e as ne,f as c,g as z,o as w,w as n,h as e,i as p,j as R,k as oe,l as Y,m as L,t as N,n as k,p as x,F as $,q as O,u as le,s as se,v as re,x as ue,y as de,z as D,D as G,Q as q,A as ie,S as pe,B as ce}from"./vendor-C-L0XOLB.js";const V=(o,l)=>{const u=o.__vccOpts||o;for(const[s,b]of l)u[s]=b;return u};me(),ve();function me(){const o=[],l="2025-01-01";let b=0;const t=-400,C=-200;for(let i=1;i<=5;i++)for(let a=1;a<=20;a++){const r=`seat-${String(++b).padStart(4,"0")}`,d=i===3&&(a===10||a===11),f=i===1&&a===20,S=d||f,_=d?"equipment":f?"other":void 0;o.push({id:r,venueId:"venue-001",floorId:"F1",zoneId:"zone-001",zoneName:"VIP 区",zoneColor:"#FFD700",rowLabel:String(i),seatLabel:String(a),status:S?"disabled":"available",disabledReason:_,x:t+(a-1)*40,y:C+(i-1)*50,createdAt:l,updatedAt:l})}const v=-400,y=C+250+20;for(let i=1;i<=15;i++)for(let a=1;a<=20;a++){const r=`seat-${String(++b).padStart(4,"0")}`,d=i===8&&(a===15||a===16),f=i===15&&(a===1||a===20),S=d||f,_=d?"maintenance":f?"other":void 0;o.push({id:r,venueId:"venue-001",floorId:"F1",zoneId:"zone-002",zoneName:"A 区",zoneColor:"#FF6B6B",rowLabel:String(i),seatLabel:String(a),status:S?"disabled":"available",disabledReason:_,x:v+(a-1)*40,y:y+(i-1)*50,createdAt:l,updatedAt:l})}const m=-500,g=-200;for(let i=1;i<=20;i++)for(let a=1;a<=25;a++){const r=`seat-${String(++b).padStart(4,"0")}`,d=i===10&&(a===12||a===13),f=i===20&&a===1,S=d||f,_=d?"equipment":f?"other":void 0;o.push({id:r,venueId:"venue-001",floorId:"F2",zoneId:"zone-003",zoneName:"B 区",zoneColor:"#4ECDC4",rowLabel:String(i),seatLabel:String(a),status:S?"disabled":"available",disabledReason:_,x:m+(a-1)*40,y:g+(i-1)*50,createdAt:l,updatedAt:l})}return o}function ve(){const o=[],l="2025-03-15";let b=0;const t=300,C=-200;for(let i=1;i<=3;i++)for(let a=1;a<=8;a++){const r=`seat-v5-${String(++b).padStart(4,"0")}`,d=i===2&&(a===4||a===5);o.push({id:r,venueId:"venue-005",floorId:"floor-002",zoneId:"zone-007",zoneName:"VIP 包厢区",zoneColor:"#FFD700",rowLabel:String(i),seatLabel:String(a),status:d?"disabled":"available",disabledReason:d?"equipment":void 0,x:t+(a-1)*40,y:C+(i-1)*50,createdAt:l,updatedAt:l})}const v=-600,y=-250;for(let i=1;i<=20;i++)for(let a=1;a<=30;a++){const r=`seat-v5-${String(++b).padStart(4,"0")}`,d=i===10&&(a===15||a===16),f=i===1&&(a===1||a===30),S=d||f,_=d?"maintenance":f?"other":void 0;o.push({id:r,venueId:"venue-005",floorId:"floor-001",zoneId:"zone-008",zoneName:"池座区",zoneColor:"#FF6B6B",rowLabel:String(i),seatLabel:String(a),status:S?"disabled":"available",disabledReason:_,x:v+(a-1)*40,y:y+(i-1)*50,createdAt:l,updatedAt:l})}const m=-500,g=-200;for(let i=1;i<=10;i++)for(let a=1;a<=20;a++){const r=`seat-v5-${String(++b).padStart(4,"0")}`,d=i===10&&a===20;o.push({id:r,venueId:"venue-005",floorId:"floor-002",zoneId:"zone-009",zoneName:"楼座区",zoneColor:"#4ECDC4",rowLabel:String(i),seatLabel:String(a),status:d?"disabled":"available",disabledReason:d?"other":void 0,x:m+(a-1)*40,y:g+(i-1)*50,createdAt:l,updatedAt:l})}return o}const U=ae.create({baseURL:void 0,timeout:15e3});U.interceptors.request.use(o=>o,o=>Promise.reject(o));U.interceptors.response.use(o=>o,o=>{const l=o?.response?.data?.message??o?.message??"网络异常，请稍后重试";return F.error(l),Promise.reject(o)});function B(o){const l=o;if(l&&typeof l=="object"){if("status"in l){const u=l;if(u.status==="success")return u.result;const s=u.messages&&u.messages[0]||"请求失败";throw F.error(s),new Error(s)}if("code"in l&&"data"in l){const u=l;if(u.code===0)return u.data;const s=u.message||"请求失败";throw F.error(s),new Error(s)}}return l}async function Me(o,l){const u=await U.get(o,l);return B(u.data)}async function fe(o,l,u){const s=await U.post(o,l,u);return B(s.data)}async function Ge(o,l,u){const s=await U.patch(o,l,u);return B(s.data)}async function qe(o,l){const u=await U.delete(o,l);return B(u.data)}const He=P({__name:"index",setup(o){T.locale("zh-cn");const l=I([]),u=I(T()),s=I([]),b={style:{width:"150px"}},t={span:14},C=I("apple"),v=I(),y=I([]),m=ne([{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou"}]}]),g=I(!1);return(i,a)=>{const r=c("a-checkbox"),d=c("a-form-item"),f=c("a-radio"),S=c("a-radio-group"),_=c("a-input"),h=c("a-select-option"),K=c("a-select"),J=c("a-cascader"),Z=c("YDatePicker"),j=c("YDatePickerRange"),X=c("a-textarea"),Q=c("YSwitch"),W=c("YUpload"),ee=c("YUploadDraggable"),M=c("a-button"),te=c("a-form");return w(),z(te,{"label-col":b,"wrapper-col":t,layout:"horizontal",style:{"max-width":"600px"}},{default:n(()=>[e(d,{label:"复选框"},{default:n(()=>[e(r,null,{default:n(()=>[...a[8]||(a[8]=[p("checkbox",-1)])]),_:1})]),_:1}),e(d,{label:"单选框"},{default:n(()=>[e(S,{value:C.value,"onUpdate:value":a[0]||(a[0]=A=>C.value=A)},{default:n(()=>[e(f,{value:"apple"},{default:n(()=>[...a[9]||(a[9]=[p("Apple",-1)])]),_:1}),e(f,{value:"pear"},{default:n(()=>[...a[10]||(a[10]=[p("Pear",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(d,{label:"输入框"},{default:n(()=>[e(_,{placeholder:"123"})]),_:1}),e(d,{label:"带后缀的输入框"},{default:n(()=>[e(_,null,{addonAfter:n(()=>[...a[11]||(a[11]=[p(" 元 ",-1)])]),_:1})]),_:1}),e(d,{label:"下拉选择"},{default:n(()=>[e(K,{value:v.value,"onUpdate:value":a[1]||(a[1]=A=>v.value=A),style:{width:"216px"},virtual:!1},{default:n(()=>[e(h,{value:"demo"},{default:n(()=>[...a[12]||(a[12]=[p("所有会场",-1)])]),_:1}),e(h,{value:"Demo1"},{default:n(()=>[...a[13]||(a[13]=[p("Demo1",-1)])]),_:1}),e(h,{value:"Demo11"},{default:n(()=>[...a[14]||(a[14]=[p("Demo11",-1)])]),_:1}),e(h,{value:"Demo12"},{default:n(()=>[...a[15]||(a[15]=[p("Demo12",-1)])]),_:1}),e(h,{value:"Demo13"},{default:n(()=>[...a[16]||(a[16]=[p("Demo13",-1)])]),_:1}),e(h,{value:"Demo14"},{default:n(()=>[...a[17]||(a[17]=[p("Demo14",-1)])]),_:1}),e(h,{value:"Demo15"},{default:n(()=>[...a[18]||(a[18]=[p("Demo15",-1)])]),_:1}),e(h,{value:"Demo16"},{default:n(()=>[...a[19]||(a[19]=[p("Demo16",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(d,{label:"级联选择"},{default:n(()=>[e(J,{value:l.value,"onUpdate:value":a[2]||(a[2]=A=>l.value=A),options:m},null,8,["value","options"])]),_:1}),e(d,{label:"时间选择"},{default:n(()=>[e(Z,{value:u.value,"onUpdate:value":a[3]||(a[3]=A=>u.value=A),style:{width:"216px"}},null,8,["value"])]),_:1}),e(d,{label:"时间范围选择"},{default:n(()=>[e(j,{value:s.value,"onUpdate:value":a[4]||(a[4]=A=>s.value=A),disabled:!1,format:"YYYY-MM-DD",style:{width:"300px"}},null,8,["value"])]),_:1}),e(d,{label:"文本框"},{default:n(()=>[e(X,{"auto-size":{minRows:3,maxRows:3}})]),_:1}),e(d,{label:"开关"},{default:n(()=>[e(Q,{checked:g.value,"onUpdate:checked":a[5]||(a[5]=A=>g.value=A)},null,8,["checked"])]),_:1}),e(d,{label:"上传"},{default:n(()=>[e(W,{fileList:y.value,"onUpdate:fileList":a[6]||(a[6]=A=>y.value=A),action:"/upload.do","max-count":5},null,8,["fileList"])]),_:1}),e(d,{label:"可拖拽改变顺序"},{default:n(()=>[e(ee,{fileList:y.value,"onUpdate:fileList":a[7]||(a[7]=A=>y.value=A),action:"/upload.do","max-count":5},null,8,["fileList"])]),_:1}),e(d,{label:"按钮"},{default:n(()=>[e(M,null,{default:n(()=>[...a[20]||(a[20]=[p("Button",-1)])]),_:1}),e(M,{type:"primary"},{default:n(()=>[...a[21]||(a[21]=[p("Button",-1)])]),_:1})]),_:1})]),_:1})}}});async function _e(o){return fe("/TMSH5/Account/SignIn",o)}const ye=P({__name:"DemoPage",setup(o){const l=I("示例"),u=I(0),s=R(()=>u.value*2),b=()=>{u.value++},t=I({account:"",cashierJobNumber:"",password:""}),C=I(!1),v=I(null),y=async()=>{if(!(!t.value.account||!t.value.cashierJobNumber||!t.value.password)){C.value=!0,v.value=null;try{const m=await _e({account:t.value.account,cashierJobNumber:t.value.cashierJobNumber,password:t.value.password});v.value=m}catch(m){console.error("调用 signIn 失败:",m)}finally{C.value=!1}}};return oe(()=>{console.log("DemoPage 已挂载")}),Y(u,(m,g)=>{console.log(`count 变化: ${g} -> ${m}`)}),(m,g)=>{const i=c("a-typography-text"),a=c("a-button"),r=c("a-alert"),d=c("a-input"),f=c("a-space"),S=c("a-card");return w(),z(S,{title:l.value},{default:n(()=>[e(f,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[e(i,null,{default:n(()=>[p("计数: "+N(u.value),1)]),_:1}),e(a,{type:"primary",onClick:b},{default:n(()=>[p(" 增加 ("+N(u.value)+") ",1)]),_:1}),s.value>4?(w(),z(r,{key:0,type:"warning",message:`当前双倍计数为: ${s.value}`},null,8,["message"])):L("",!0),e(i,{strong:""},{default:n(()=>[...g[3]||(g[3]=[p("signIn 接口示例",-1)])]),_:1}),e(d,{value:t.value.account,"onUpdate:value":g[0]||(g[0]=_=>t.value.account=_),placeholder:"account（门店账号）",style:{"max-width":"300px"}},null,8,["value"]),e(d,{value:t.value.cashierJobNumber,"onUpdate:value":g[1]||(g[1]=_=>t.value.cashierJobNumber=_),placeholder:"cashierJobNumber（收银工号）",style:{"max-width":"300px"}},null,8,["value"]),e(d,{value:t.value.password,"onUpdate:value":g[2]||(g[2]=_=>t.value.password=_),type:"password",placeholder:"password（登录密码）",style:{"max-width":"300px"}},null,8,["value"]),e(a,{type:"primary",loading:C.value,onClick:y},{default:n(()=>[...g[4]||(g[4]=[p(" 调用 signIn 接口 ",-1)])]),_:1},8,["loading"]),v.value?(w(),z(r,{key:1,type:"success",message:`登录成功，收银员：${v.value.CashierName}`},null,8,["message"])):L("",!0)]),_:1})]),_:1},8,["title"])}}}),Ke=V(ye,[["__scopeId","data-v-eebcb7ca"]]),ge={style:{width:"50%",margin:"100px auto"}},be={key:1},Je=P({__name:"DemoPage2",setup(o){const l=I(!1),u=I("A"),s=I(""),b=I([{id:1,name:"项目1"},{id:2,name:"项目2"}]),t=y=>{console.log(`点击了${y}按钮`)},C=()=>{console.log("鼠标移入")},v=y=>{console.log("搜索值：",y)};return(y,m)=>{const g=c("a-skeleton"),i=c("a-alert"),a=c("a-input-search"),r=c("a-button"),d=c("a-space");return w(),k("div",ge,[e(d,{direction:"vertical"},{default:n(()=>[l.value?(w(),z(g,{key:0,active:""})):u.value==="A"?(w(),k("div",be,[e(i,{message:"A类型内容",type:"info"})])):(w(),z(i,{key:2,message:"其他内容",type:"warning"})),x("div",null,[(w(!0),k($,null,O(b.value,f=>(w(),k("div",{key:f.id},N(f.name),1))),128))]),e(a,{value:s.value,"onUpdate:value":m[0]||(m[0]=f=>s.value=f),placeholder:"输入搜索内容","enter-button":"搜索",onSearch:v},null,8,["value"]),e(d,null,{default:n(()=>[e(r,{type:"primary",onClick:m[1]||(m[1]=f=>t("primary"))},{default:n(()=>[...m[3]||(m[3]=[p("主要按钮",-1)])]),_:1}),e(r,{danger:"",onClick:m[2]||(m[2]=f=>t("danger"))},{default:n(()=>[...m[4]||(m[4]=[p("危险按钮",-1)])]),_:1}),e(r,{onMouseenter:C},{default:n(()=>[...m[5]||(m[5]=[p("鼠标移入",-1)])]),_:1})]),_:1})]),_:1})])}}}),Ce=P({__name:"DemoPage3Child",props:{title:{},count:{}},emits:["update-count"],setup(o,{emit:l}){const u=o,s=l,b=C=>{const v=u.count+C;s("update-count",v)},t=()=>{s("update-count",0)};return(C,v)=>{const y=c("a-progress"),m=c("a-typography-text"),g=c("a-button"),i=c("a-button-group"),a=c("a-space"),r=c("a-card");return w(),z(r,{title:u.title},{default:n(()=>[e(a,{direction:"vertical"},{default:n(()=>[e(y,{type:"circle",percent:u.count/20*100},null,8,["percent"]),e(m,null,{default:n(()=>[p("当前计数: "+N(u.count),1)]),_:1}),e(i,null,{default:n(()=>[e(g,{onClick:v[0]||(v[0]=d=>b(-1))},{default:n(()=>[...v[2]||(v[2]=[p("减少",-1)])]),_:1}),e(g,{type:"primary",onClick:v[1]||(v[1]=d=>b(1))},{default:n(()=>[...v[3]||(v[3]=[p("增加",-1)])]),_:1}),e(g,{danger:"",onClick:t},{default:n(()=>[...v[4]||(v[4]=[p("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}}}),Ze=P({__name:"DemoPage3",setup(o){const l=I("来自父组件的标题"),u=I(10),s=b=>{u.value=b,F.success(`计数已更新为：${b}`)};return(b,t)=>{const C=c("a-divider"),v=c("a-card");return w(),z(v,{title:"父组件"},{default:n(()=>[e(Ce,{title:l.value,count:u.value,onUpdateCount:s},null,8,["title","count"]),e(C),x("div",null,"父组件的计算是："+N(u.value),1)]),_:1})}}}),je=P({__name:"DemoPage4",setup(o){const l=le();se();const u=()=>{l.push({name:"demo"})},s=()=>{l.push({path:"demo3",query:{id:1}})};return re((b,t)=>{debugger}),(b,t)=>{const C=c("a-button");return w(),k("div",null,[e(C,{onClick:u},{default:n(()=>[...t[0]||(t[0]=[p("前往demo1",-1)])]),_:1}),e(C,{onClick:s},{default:n(()=>[...t[1]||(t[1]=[p("前往demo3并带参数",-1)])]),_:1})])}}}),H=[{id:1,name:"张三",email:"zhangsan@example.com",isActive:!0},{id:2,name:"李四",email:"lisi@example.com",isActive:!1}];async function we(){return await new Promise(o=>setTimeout(o,300)),H}async function Ie(o){await new Promise(u=>setTimeout(u,200));const l={id:Date.now(),isActive:!0,...o};return H.push(l),l}const ke=ue("user",{state:()=>({users:[],currentUser:null,loading:!1,count:0}),getters:{activeUsers:o=>o.users.filter(l=>l.isActive),userCount:o=>o.users.length,getUserById:o=>l=>o.users.find(u=>u.id===l)},actions:{setUsers(o){this.users=o},async fetchUsers(){this.loading=!0;try{const o=await we();this.users=o}catch(o){throw console.error("获取用户失败:",o),o}finally{this.loading=!1}},async addUser(o){const l=await Ie(o);return this.users.push(l),l},increment(){this.count++}}}),Se={key:0},Ae={key:1},Xe=P({__name:"DemoPage5",setup(o){const l=ke(),{users:u,loading:s,userCount:b}=de(l),{fetchUsers:t,addUser:C}=l,v=async()=>{await t()};return(y,m)=>(w(),k("div",null,[x("h2",null,"用户列表 ("+N(D(b))+")",1),D(s)?(w(),k("div",Se,"加载中...")):(w(),k("ul",Ae,[(w(!0),k($,null,O(D(u),g=>(w(),k("li",{key:g.id},N(g.name),1))),128))])),x("button",{onClick:v},"刷新")]))}}),xe={class:"coupon-basic-setting"},De={key:1,class:"relative-days"},ze=P({__name:"DemoPage6",setup(o){const l={style:{width:"100px"}},u={span:14},s=I({name:"",type:"cash",limitType:"none",amount:null,obtainType:"free",receiveRange:[T(),T().add(7,"day")],useDateMode:"fixed",useRange:[T(),T().add(30,"day")],validDays:7,skuScope:"all"});return(b,t)=>{const C=c("a-input"),v=c("a-form-item"),y=c("a-typography-link"),m=c("a-space"),g=c("a-select-option"),i=c("a-select"),a=c("a-input-number"),r=c("a-radio"),d=c("a-radio-group"),f=c("YDatePickerRange"),S=c("a-form");return w(),k("div",xe,[t[34]||(t[34]=x("div",{class:"coupon-basic-setting__title"},"基础设置",-1)),e(S,{"label-col":l,"wrapper-col":u,layout:"horizontal",autocomplete:"off"},{default:n(()=>[e(v,{label:"券名称：",required:""},{default:n(()=>[e(C,{value:s.value.name,"onUpdate:value":t[0]||(t[0]=_=>s.value.name=_),placeholder:"请输入券名称",style:{width:"320px"}},null,8,["value"])]),_:1}),e(v,{label:"适用门店：",required:""},{default:n(()=>[e(m,null,{default:n(()=>[e(y,null,{default:n(()=>[...t[10]||(t[10]=[p("选择门店",-1)])]),_:1}),t[11]||(t[11]=x("span",{class:"field-tip"},"（仅示例，不真正选择）",-1))]),_:1})]),_:1}),e(v,{label:"券类型：",required:""},{default:n(()=>[e(i,{value:s.value.type,"onUpdate:value":t[1]||(t[1]=_=>s.value.type=_),placeholder:"请选择券类型",style:{width:"200px"}},{default:n(()=>[e(g,{value:"cash"},{default:n(()=>[...t[12]||(t[12]=[p("抵现券",-1)])]),_:1}),e(g,{value:"discount"},{default:n(()=>[...t[13]||(t[13]=[p("折扣券",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(v,{label:"抵现金额：",required:""},{default:n(()=>[e(m,{align:"center"},{default:n(()=>[e(i,{value:s.value.limitType,"onUpdate:value":t[2]||(t[2]=_=>s.value.limitType=_),style:{width:"96px"}},{default:n(()=>[e(g,{value:"none"},{default:n(()=>[...t[14]||(t[14]=[p("无门槛",-1)])]),_:1}),e(g,{value:"full"},{default:n(()=>[...t[15]||(t[15]=[p("满额可用",-1)])]),_:1})]),_:1},8,["value"]),t[16]||(t[16]=x("span",null,"可抵扣",-1)),e(a,{value:s.value.amount,"onUpdate:value":t[3]||(t[3]=_=>s.value.amount=_),min:0,precision:2,style:{width:"120px"}},null,8,["value"]),t[17]||(t[17]=x("span",null,"元",-1))]),_:1})]),_:1}),e(v,{label:"获取方式：",required:""},{default:n(()=>[e(d,{value:s.value.obtainType,"onUpdate:value":t[4]||(t[4]=_=>s.value.obtainType=_)},{default:n(()=>[e(r,{value:"free"},{default:n(()=>[...t[18]||(t[18]=[p("免费领取",-1)])]),_:1}),e(r,{value:"activity"},{default:n(()=>[...t[19]||(t[19]=[p("活动赠送或第三方渠道",-1)])]),_:1}),e(r,{value:"sale"},{default:n(()=>[...t[20]||(t[20]=[p("定价售卖",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(v,{label:"领取日期：",required:""},{default:n(()=>[e(m,{align:"center"},{default:n(()=>[e(f,{value:s.value.receiveRange,"onUpdate:value":t[5]||(t[5]=_=>s.value.receiveRange=_),style:{width:"360px"},format:"YYYY-MM-DD"},null,8,["value"]),e(y,null,{default:n(()=>[t[21]||(t[21]=p(" 更多时间设置 ",-1)),e(D(G),{style:{"font-size":"12px","margin-left":"4px"}})]),_:1})]),_:1})]),_:1}),e(v,{label:"使用日期：",required:""},{default:n(()=>[e(m,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[e(d,{value:s.value.useDateMode,"onUpdate:value":t[6]||(t[6]=_=>s.value.useDateMode=_)},{default:n(()=>[e(r,{value:"fixed"},{default:n(()=>[...t[22]||(t[22]=[p("固定日期",-1)])]),_:1}),e(r,{value:"relative"},{default:n(()=>[...t[23]||(t[23]=[p("相对有效期",-1)])]),_:1})]),_:1},8,["value"]),s.value.useDateMode==="fixed"?(w(),z(m,{key:0,align:"center"},{default:n(()=>[e(f,{value:s.value.useRange,"onUpdate:value":t[7]||(t[7]=_=>s.value.useRange=_),style:{width:"360px"},format:"YYYY-MM-DD"},null,8,["value"]),e(y,null,{default:n(()=>[t[24]||(t[24]=p(" 更多时间设置 ",-1)),e(D(G),{style:{"font-size":"12px","margin-left":"4px"}})]),_:1})]),_:1})):(w(),k("div",De,[t[25]||(t[25]=p(" 自领取之日起 ",-1)),e(a,{value:s.value.validDays,"onUpdate:value":t[8]||(t[8]=_=>s.value.validDays=_),min:1,precision:0,style:{width:"80px"}},null,8,["value"]),t[26]||(t[26]=p(" 天内有效 ",-1))]))]),_:1})]),_:1}),e(v,{label:"参与的商品：",required:""},{default:n(()=>[e(d,{value:s.value.skuScope,"onUpdate:value":t[9]||(t[9]=_=>s.value.skuScope=_),class:"sku-scope-group"},{default:n(()=>[e(r,{value:"all"},{default:n(()=>[...t[27]||(t[27]=[p("全店所有商品",-1)])]),_:1}),e(r,{value:"tag"},{default:n(()=>[...t[28]||(t[28]=[p("标签所属商品",-1)])]),_:1}),e(r,{value:"category"},{default:n(()=>[...t[29]||(t[29]=[p("分类所属商品",-1)])]),_:1}),e(r,{value:"指定商品"},{default:n(()=>[t[30]||(t[30]=p(" 指定商品 ",-1)),e(D(q),{style:{"margin-left":"4px",color:"#999"}})]),_:1}),e(r,{value:"brand"},{default:n(()=>[t[31]||(t[31]=p(" 指定品牌 ",-1)),e(D(q),{style:{"margin-left":"4px",color:"#999"}})]),_:1})]),_:1},8,["value"])]),_:1}),e(v,{colon:!1,label:" "},{default:n(()=>[t[33]||(t[33]=p(" 不参与的商品",-1)),e(y,{type:"secondary"},{default:n(()=>[...t[32]||(t[32]=[p(" 展开",-1)])]),_:1})]),_:1})]),_:1})])}}}),Qe=V(ze,[["__scopeId","data-v-8906a722"]]),Ne={class:"table-column-setting"},Pe={class:"table-column-setting__title"},he={class:"table-column-setting__grid"},Re={class:"table-column-setting__footer"},Te=P({__name:"TableColumnSetting",props:{columns:{},checkedKeys:{},title:{default:"自定义表格字段"}},emits:["confirm"],setup(o,{emit:l}){const u=o,s=l,b=I(!1),t=I([]),C=R(()=>{const y=u.columns.map(m=>({...m}));return y.length%2!==0&&y.push({key:`__placeholder__-${y.length}`,label:"",disabled:!0,defaultHidden:!0,isPlaceholder:!0}),y});Y(()=>u.checkedKeys,y=>{t.value=[...y]},{immediate:!0});const v=()=>{s("confirm",t.value),b.value=!1};return(y,m)=>{const g=c("a-checkbox"),i=c("a-checkbox-group"),a=c("a-button"),r=c("a-space"),d=c("a-popover");return w(),z(d,{open:b.value,"onUpdate:open":m[2]||(m[2]=f=>b.value=f),trigger:"click",placement:"bottomLeft","overlay-class-name":"table-column-setting-popover"},{content:n(()=>[x("div",Ne,[x("div",Pe,N(u.title),1),e(i,{value:t.value,"onUpdate:value":m[0]||(m[0]=f=>t.value=f),class:"table-column-setting__group"},{default:n(()=>[x("div",he,[(w(!0),k($,null,O(C.value,f=>(w(),k("div",{key:f.key,class:ce(["table-column-setting__grid-item",{"table-column-setting__grid-item--placeholder":f.isPlaceholder}])},[f.isPlaceholder?L("",!0):(w(),z(g,{key:0,value:f.key,disabled:f.disabled},{default:n(()=>[p(N(f.label),1)]),_:2},1032,["value","disabled"]))],2))),128))])]),_:1},8,["value"]),x("div",Re,[e(r,null,{default:n(()=>[e(a,{onClick:m[1]||(m[1]=f=>b.value=!1)},{default:n(()=>[...m[3]||(m[3]=[p("关闭",-1)])]),_:1}),e(a,{type:"primary",onClick:v},{default:n(()=>[...m[4]||(m[4]=[p("保存",-1)])]),_:1})]),_:1})])])]),default:n(()=>[ie(y.$slots,"default",{},()=>[e(a,{type:"text",size:"small",class:"table-column-setting__trigger"},{default:n(()=>[e(D(pe))]),_:1})],!0)]),_:3},8,["open"])}}}),Ue=V(Te,[["__scopeId","data-v-dfcaf4ab"]]),Le=o=>{if(typeof window>"u")return null;try{const l=window.localStorage.getItem(o);if(!l)return null;const u=JSON.parse(l);return Array.isArray(u)?u.filter(s=>typeof s=="string"):null}catch{return null}},$e=(o,l)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(o,JSON.stringify(l))}catch{}},E=o=>{if(o.key)return String(o.key);if(o.dataIndex)return Array.isArray(o.dataIndex)?o.dataIndex.join("."):String(o.dataIndex);throw new Error("Column key is required when using useTableColumnSetting.")},Fe=o=>o.settingLabel?o.settingLabel:typeof o.title=="string"?o.title:E(o),Ye=({columns:o,storageKey:l})=>{const u=I(o),s=R(()=>u.value.filter(r=>r.enableSetting!==!1).map(r=>({key:E(r),label:Fe(r),disabled:!!r.settingDisabled,defaultHidden:!!r.defaultHidden}))),b=R(()=>s.value.map(r=>r.key)),t=R(()=>{const r=s.value.filter(d=>!d.defaultHidden).map(d=>d.key);return r.length?r:b.value}),C=r=>{if(!b.value.length)return[];const d=s.value.filter(_=>_.disabled).map(_=>_.key),f=r.filter(_=>b.value.includes(_)),S=f.length?f:t.value;return Array.from(new Set([...S,...d]))},v=Le(l),y=I(C(v??t.value));Y(s,()=>{y.value=C(y.value)}),Y(y,r=>{$e(l,r)},{deep:!0});const m=R(()=>u.value.filter(r=>{if(r.enableSetting===!1)return!0;const d=E(r);return y.value.includes(d)})),g=R(()=>s.value.map(({key:r,label:d,disabled:f,defaultHidden:S})=>({key:r,label:d,disabled:f,defaultHidden:S})));return{visibleColumns:m,columnSettingItems:g,checkedKeys:y,updateCheckedKeys:r=>{y.value=C(r)},resetColumns:()=>{y.value=C(t.value)}}},Ve={class:"table-column-demo"},Be={key:0,class:"table-column-demo__column-setting"},Ee=P({__name:"TableColumnSettingDemo",setup(o){const u=I([{id:1,name:"Cynthia",phone:"13800000000",status:"active",level:"铂金",balance:520.5,points:880},{id:2,name:"Leo",phone:"13900000000",status:"inactive",level:"金卡",balance:200,points:120},{id:3,name:"Maggie",phone:"13600000000",status:"active",level:"黑金",balance:9999,points:5560},{id:4,name:"Joey",phone:"13500000000",status:"active",level:"银卡",balance:60,points:90},{id:5,name:"Elena",phone:"13700000000",status:"inactive",level:"普卡",balance:10,points:15}]),s=[{title:"序号",key:"__index__",width:80,align:"center",enableSetting:!1},{title:"会员姓名",dataIndex:"name",key:"name",width:140},{title:"手机号",dataIndex:"phone",key:"phone",width:160},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"会员等级",dataIndex:"level",key:"level",width:120},{title:"余额",dataIndex:"balance",key:"balance",width:120,align:"right"},{title:"积分",dataIndex:"points",key:"points",width:120,align:"right"}],{visibleColumns:b,columnSettingItems:t,checkedKeys:C,updateCheckedKeys:v}=Ye({columns:s,storageKey:"demo-table-column-setting"});return(y,m)=>{const g=c("a-badge"),i=c("a-table"),a=c("a-card");return w(),k("div",Ve,[e(a,{title:"表格列自定义 Demo"},{default:n(()=>[m[0]||(m[0]=x("p",{class:"table-column-demo__desc"},[p(" 该页面展示了 "),x("code",null,"useTableColumnSetting"),p(" Hook 与 "),x("code",null,"TableColumnSetting"),p(" 组件的组合用法，可以直接在头部弹窗里控制列显隐。 ")],-1)),e(i,{columns:D(b),"data-source":u.value,size:"middle","row-key":"id",pagination:!1},{headerCell:n(({column:r})=>[r.key==="__index__"?(w(),k("div",Be,[e(Ue,{columns:D(t),"checked-keys":D(C),onConfirm:D(v)},null,8,["columns","checked-keys","onConfirm"])])):L("",!0)]),bodyCell:n(({column:r,text:d,index:f})=>[r.key==="__index__"?(w(),k($,{key:0},[p(N(f+1),1)],64)):r.key==="status"?(w(),z(g,{key:1,status:d==="active"?"success":"default",text:d==="active"?"启用":"停用"},null,8,["status","text"])):r.key==="balance"||r.key==="points"?(w(),k($,{key:2},[p(N(Number(d).toLocaleString()),1)],64)):L("",!0)]),_:1},8,["columns","data-source"])]),_:1})])}}}),We=V(Ee,[["__scopeId","data-v-4eea4a43"]]);export{Ke as D,We as T,V as _,fe as a,He as b,Je as c,qe as d,Ze as e,je as f,Me as g,Xe as h,Qe as i,Ge as p};
