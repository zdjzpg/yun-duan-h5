const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-CQ4RscqV.js","assets/vendor-B6snAd4S.css"])))=>i.map(i=>d[i]);
import{a as $,d as N,b as T,r as I,c as oe,e as v,f as h,o as C,w as n,g as e,h as m,i as R,j as se,k as E,l as U,t as P,m as k,n as x,F as L,p as M,u as le,q as re,s as ue,v as ie,x as de,y as D,D as G,Q as H,z as ce,S as pe,A as me}from"./vendor-CQ4RscqV.js";const F=(o,s)=>{const l=o.__vccOpts||o;for(const[r,_]of s)l[r]=_;return l},ve="modulepreload",fe=function(o){return"/yun-duan-h5/"+o},K={},_e=function(s,l,r){let _=Promise.resolve();if(l&&l.length>0){let g=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),p=w?.nonce||w?.getAttribute("nonce");_=g(l.map(i=>{if(i=fe(i),i in K)return;K[i]=!0;const f=i.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const a=document.createElement("link");if(a.rel=f?"stylesheet":ve,f||(a.as="script"),a.crossOrigin="",a.href=i,p&&a.setAttribute("nonce",p),document.head.appendChild(a),f)return new Promise((u,c)=>{a.addEventListener("load",u),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})}))}function t(w){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=w,window.dispatchEvent(p),!p.defaultPrevented)throw w}return _.then(w=>{for(const p of w||[])p.status==="rejected"&&t(p.reason);return s().catch(t)})};ye(),ge();function ye(){const o=[],s="2025-01-01";let _=0;const t=-400,w=-200;for(let d=1;d<=5;d++)for(let a=1;a<=20;a++){const u=`seat-${String(++_).padStart(4,"0")}`,c=d===3&&(a===10||a===11),y=d===1&&a===20,S=c||y,b=c?"equipment":y?"other":void 0;o.push({id:u,venueId:"venue-001",floorId:"F1",zoneId:"zone-001",zoneName:"VIP 区",zoneColor:"#FFD700",rowLabel:String(d),seatLabel:String(a),status:S?"disabled":"available",disabledReason:b,x:t+(a-1)*40,y:w+(d-1)*50,createdAt:s,updatedAt:s})}const p=-400,g=w+250+20;for(let d=1;d<=15;d++)for(let a=1;a<=20;a++){const u=`seat-${String(++_).padStart(4,"0")}`,c=d===8&&(a===15||a===16),y=d===15&&(a===1||a===20),S=c||y,b=c?"maintenance":y?"other":void 0;o.push({id:u,venueId:"venue-001",floorId:"F1",zoneId:"zone-002",zoneName:"A 区",zoneColor:"#FF6B6B",rowLabel:String(d),seatLabel:String(a),status:S?"disabled":"available",disabledReason:b,x:p+(a-1)*40,y:g+(d-1)*50,createdAt:s,updatedAt:s})}const i=-500,f=-200;for(let d=1;d<=20;d++)for(let a=1;a<=25;a++){const u=`seat-${String(++_).padStart(4,"0")}`,c=d===10&&(a===12||a===13),y=d===20&&a===1,S=c||y,b=c?"equipment":y?"other":void 0;o.push({id:u,venueId:"venue-001",floorId:"F2",zoneId:"zone-003",zoneName:"B 区",zoneColor:"#4ECDC4",rowLabel:String(d),seatLabel:String(a),status:S?"disabled":"available",disabledReason:b,x:i+(a-1)*40,y:f+(d-1)*50,createdAt:s,updatedAt:s})}return o}function ge(){const o=[],s="2025-03-15";let _=0;const t=300,w=-200;for(let d=1;d<=3;d++)for(let a=1;a<=8;a++){const u=`seat-v5-${String(++_).padStart(4,"0")}`,c=d===2&&(a===4||a===5);o.push({id:u,venueId:"venue-005",floorId:"floor-002",zoneId:"zone-007",zoneName:"VIP 包厢区",zoneColor:"#FFD700",rowLabel:String(d),seatLabel:String(a),status:c?"disabled":"available",disabledReason:c?"equipment":void 0,x:t+(a-1)*40,y:w+(d-1)*50,createdAt:s,updatedAt:s})}const p=-600,g=-250;for(let d=1;d<=20;d++)for(let a=1;a<=30;a++){const u=`seat-v5-${String(++_).padStart(4,"0")}`,c=d===10&&(a===15||a===16),y=d===1&&(a===1||a===30),S=c||y,b=c?"maintenance":y?"other":void 0;o.push({id:u,venueId:"venue-005",floorId:"floor-001",zoneId:"zone-008",zoneName:"池座区",zoneColor:"#FF6B6B",rowLabel:String(d),seatLabel:String(a),status:S?"disabled":"available",disabledReason:b,x:p+(a-1)*40,y:g+(d-1)*50,createdAt:s,updatedAt:s})}const i=-500,f=-200;for(let d=1;d<=10;d++)for(let a=1;a<=20;a++){const u=`seat-v5-${String(++_).padStart(4,"0")}`,c=d===10&&a===20;o.push({id:u,venueId:"venue-005",floorId:"floor-002",zoneId:"zone-009",zoneName:"楼座区",zoneColor:"#4ECDC4",rowLabel:String(d),seatLabel:String(a),status:c?"disabled":"available",disabledReason:c?"other":void 0,x:i+(a-1)*40,y:f+(d-1)*50,createdAt:s,updatedAt:s})}return o}let B=null;const Y=async()=>{if(B)return B;const{default:o}=await _e(async()=>{const{default:l}=await import("./vendor-CQ4RscqV.js").then(r=>r.aZ);return{default:l}},__vite__mapDeps([0,1])),s=o.create({baseURL:void 0,timeout:15e3});return s.interceptors.request.use(l=>l,l=>Promise.reject(l)),s.interceptors.response.use(l=>l,l=>{const r=l?.response?.data?.message??l?.message??"网络异常，请稍后重试";return $.error(r),Promise.reject(l)}),B=s,s};function V(o){const s=o;if(s&&typeof s=="object"){if("status"in s){const l=s;if(l.status==="success")return l.result;const r=l.messages&&l.messages[0]||"请求失败";throw $.error(r),new Error(r)}if("code"in s&&"data"in s){const l=s;if(l.code===0)return l.data;const r=l.message||"请求失败";throw $.error(r),new Error(r)}}return s}async function Ke(o,s){const r=await(await Y()).get(o,s);return V(r.data)}async function be(o,s,l){const _=await(await Y()).post(o,s,l);return V(_.data)}async function je(o,s,l){const _=await(await Y()).patch(o,s,l);return V(_.data)}async function Je(o,s){const r=await(await Y()).delete(o,s);return V(r.data)}const Ze=N({__name:"index",setup(o){T.locale("zh-cn");const s=I([]),l=I(T()),r=I([]),_={style:{width:"150px"}},t={span:14},w=I("apple"),p=I(),g=I([]),i=oe([{value:"zhejiang",label:"Zhejiang",children:[{value:"hangzhou",label:"Hangzhou"}]}]),f=I(!1);return(d,a)=>{const u=v("a-checkbox"),c=v("a-form-item"),y=v("a-radio"),S=v("a-radio-group"),b=v("a-input"),z=v("a-select-option"),J=v("a-select"),Z=v("a-cascader"),X=v("YDatePicker"),W=v("YDatePickerRange"),Q=v("a-textarea"),ee=v("YSwitch"),te=v("YUpload"),ae=v("YUploadDraggable"),q=v("a-button"),ne=v("a-form");return C(),h(ne,{"label-col":_,"wrapper-col":t,layout:"horizontal",style:{"max-width":"600px"}},{default:n(()=>[e(c,{label:"复选框"},{default:n(()=>[e(u,null,{default:n(()=>[...a[8]||(a[8]=[m("checkbox",-1)])]),_:1})]),_:1}),e(c,{label:"单选框"},{default:n(()=>[e(S,{value:w.value,"onUpdate:value":a[0]||(a[0]=A=>w.value=A)},{default:n(()=>[e(y,{value:"apple"},{default:n(()=>[...a[9]||(a[9]=[m("Apple",-1)])]),_:1}),e(y,{value:"pear"},{default:n(()=>[...a[10]||(a[10]=[m("Pear",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(c,{label:"输入框"},{default:n(()=>[e(b,{placeholder:"123"})]),_:1}),e(c,{label:"带后缀的输入框"},{default:n(()=>[e(b,null,{addonAfter:n(()=>[...a[11]||(a[11]=[m(" 元 ",-1)])]),_:1})]),_:1}),e(c,{label:"下拉选择"},{default:n(()=>[e(J,{value:p.value,"onUpdate:value":a[1]||(a[1]=A=>p.value=A),style:{width:"216px"},virtual:!1},{default:n(()=>[e(z,{value:"demo"},{default:n(()=>[...a[12]||(a[12]=[m("所有会场",-1)])]),_:1}),e(z,{value:"Demo1"},{default:n(()=>[...a[13]||(a[13]=[m("Demo1",-1)])]),_:1}),e(z,{value:"Demo11"},{default:n(()=>[...a[14]||(a[14]=[m("Demo11",-1)])]),_:1}),e(z,{value:"Demo12"},{default:n(()=>[...a[15]||(a[15]=[m("Demo12",-1)])]),_:1}),e(z,{value:"Demo13"},{default:n(()=>[...a[16]||(a[16]=[m("Demo13",-1)])]),_:1}),e(z,{value:"Demo14"},{default:n(()=>[...a[17]||(a[17]=[m("Demo14",-1)])]),_:1}),e(z,{value:"Demo15"},{default:n(()=>[...a[18]||(a[18]=[m("Demo15",-1)])]),_:1}),e(z,{value:"Demo16"},{default:n(()=>[...a[19]||(a[19]=[m("Demo16",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(c,{label:"级联选择"},{default:n(()=>[e(Z,{value:s.value,"onUpdate:value":a[2]||(a[2]=A=>s.value=A),options:i},null,8,["value","options"])]),_:1}),e(c,{label:"时间选择"},{default:n(()=>[e(X,{value:l.value,"onUpdate:value":a[3]||(a[3]=A=>l.value=A),style:{width:"216px"}},null,8,["value"])]),_:1}),e(c,{label:"时间范围选择"},{default:n(()=>[e(W,{value:r.value,"onUpdate:value":a[4]||(a[4]=A=>r.value=A),disabled:!1,format:"YYYY-MM-DD",style:{width:"300px"}},null,8,["value"])]),_:1}),e(c,{label:"文本框"},{default:n(()=>[e(Q,{"auto-size":{minRows:3,maxRows:3}})]),_:1}),e(c,{label:"开关"},{default:n(()=>[e(ee,{checked:f.value,"onUpdate:checked":a[5]||(a[5]=A=>f.value=A)},null,8,["checked"])]),_:1}),e(c,{label:"上传"},{default:n(()=>[e(te,{fileList:g.value,"onUpdate:fileList":a[6]||(a[6]=A=>g.value=A),action:"/upload.do","max-count":5},null,8,["fileList"])]),_:1}),e(c,{label:"可拖拽改变顺序"},{default:n(()=>[e(ae,{fileList:g.value,"onUpdate:fileList":a[7]||(a[7]=A=>g.value=A),action:"/upload.do","max-count":5},null,8,["fileList"])]),_:1}),e(c,{label:"按钮"},{default:n(()=>[e(q,null,{default:n(()=>[...a[20]||(a[20]=[m("Button",-1)])]),_:1}),e(q,{type:"primary"},{default:n(()=>[...a[21]||(a[21]=[m("Button",-1)])]),_:1})]),_:1})]),_:1})}}});async function we(o){return be("/TMSH5/Account/SignIn",o)}const Ce=N({__name:"DemoPage",setup(o){const s=I("示例"),l=I(0),r=R(()=>l.value*2),_=()=>{l.value++},t=I({account:"",cashierJobNumber:"",password:""}),w=I(!1),p=I(null),g=async()=>{if(!(!t.value.account||!t.value.cashierJobNumber||!t.value.password)){w.value=!0,p.value=null;try{const i=await we({account:t.value.account,cashierJobNumber:t.value.cashierJobNumber,password:t.value.password});p.value=i}catch(i){console.error("调用 signIn 失败:",i)}finally{w.value=!1}}};return se(()=>{console.log("DemoPage 已挂载")}),E(l,(i,f)=>{console.log(`count 变化: ${f} -> ${i}`)}),(i,f)=>{const d=v("a-typography-text"),a=v("a-button"),u=v("a-alert"),c=v("a-input"),y=v("a-space"),S=v("a-card");return C(),h(S,{title:s.value},{default:n(()=>[e(y,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[e(d,null,{default:n(()=>[m("计数: "+P(l.value),1)]),_:1}),e(a,{type:"primary",onClick:_},{default:n(()=>[m(" 增加 ("+P(l.value)+") ",1)]),_:1}),r.value>4?(C(),h(u,{key:0,type:"warning",message:`当前双倍计数为: ${r.value}`},null,8,["message"])):U("",!0),e(d,{strong:""},{default:n(()=>[...f[3]||(f[3]=[m("signIn 接口示例",-1)])]),_:1}),e(c,{value:t.value.account,"onUpdate:value":f[0]||(f[0]=b=>t.value.account=b),placeholder:"account（门店账号）",style:{"max-width":"300px"}},null,8,["value"]),e(c,{value:t.value.cashierJobNumber,"onUpdate:value":f[1]||(f[1]=b=>t.value.cashierJobNumber=b),placeholder:"cashierJobNumber（收银工号）",style:{"max-width":"300px"}},null,8,["value"]),e(c,{value:t.value.password,"onUpdate:value":f[2]||(f[2]=b=>t.value.password=b),type:"password",placeholder:"password（登录密码）",style:{"max-width":"300px"}},null,8,["value"]),e(a,{type:"primary",loading:w.value,onClick:g},{default:n(()=>[...f[4]||(f[4]=[m(" 调用 signIn 接口 ",-1)])]),_:1},8,["loading"]),p.value?(C(),h(u,{key:1,type:"success",message:`登录成功，收银员：${p.value.CashierName}`},null,8,["message"])):U("",!0)]),_:1})]),_:1},8,["title"])}}}),Xe=F(Ce,[["__scopeId","data-v-eebcb7ca"]]),Ie={style:{width:"50%",margin:"100px auto"}},ke={key:1},We=N({__name:"DemoPage2",setup(o){const s=I(!1),l=I("A"),r=I(""),_=I([{id:1,name:"项目1"},{id:2,name:"项目2"}]),t=g=>{console.log(`点击了${g}按钮`)},w=()=>{console.log("鼠标移入")},p=g=>{console.log("搜索值：",g)};return(g,i)=>{const f=v("a-skeleton"),d=v("a-alert"),a=v("a-input-search"),u=v("a-button"),c=v("a-space");return C(),k("div",Ie,[e(c,{direction:"vertical"},{default:n(()=>[s.value?(C(),h(f,{key:0,active:""})):l.value==="A"?(C(),k("div",ke,[e(d,{message:"A类型内容",type:"info"})])):(C(),h(d,{key:2,message:"其他内容",type:"warning"})),x("div",null,[(C(!0),k(L,null,M(_.value,y=>(C(),k("div",{key:y.id},P(y.name),1))),128))]),e(a,{value:r.value,"onUpdate:value":i[0]||(i[0]=y=>r.value=y),placeholder:"输入搜索内容","enter-button":"搜索",onSearch:p},null,8,["value"]),e(c,null,{default:n(()=>[e(u,{type:"primary",onClick:i[1]||(i[1]=y=>t("primary"))},{default:n(()=>[...i[3]||(i[3]=[m("主要按钮",-1)])]),_:1}),e(u,{danger:"",onClick:i[2]||(i[2]=y=>t("danger"))},{default:n(()=>[...i[4]||(i[4]=[m("危险按钮",-1)])]),_:1}),e(u,{onMouseenter:w},{default:n(()=>[...i[5]||(i[5]=[m("鼠标移入",-1)])]),_:1})]),_:1})]),_:1})])}}}),Se=N({__name:"DemoPage3Child",props:{title:{},count:{}},emits:["update-count"],setup(o,{emit:s}){const l=o,r=s,_=w=>{const p=l.count+w;r("update-count",p)},t=()=>{r("update-count",0)};return(w,p)=>{const g=v("a-progress"),i=v("a-typography-text"),f=v("a-button"),d=v("a-button-group"),a=v("a-space"),u=v("a-card");return C(),h(u,{title:l.title},{default:n(()=>[e(a,{direction:"vertical"},{default:n(()=>[e(g,{type:"circle",percent:l.count/20*100},null,8,["percent"]),e(i,null,{default:n(()=>[m("当前计数: "+P(l.count),1)]),_:1}),e(d,null,{default:n(()=>[e(f,{onClick:p[0]||(p[0]=c=>_(-1))},{default:n(()=>[...p[2]||(p[2]=[m("减少",-1)])]),_:1}),e(f,{type:"primary",onClick:p[1]||(p[1]=c=>_(1))},{default:n(()=>[...p[3]||(p[3]=[m("增加",-1)])]),_:1}),e(f,{danger:"",onClick:t},{default:n(()=>[...p[4]||(p[4]=[m("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}}}),Qe=N({__name:"DemoPage3",setup(o){const s=I("来自父组件的标题"),l=I(10),r=_=>{l.value=_,$.success(`计数已更新为：${_}`)};return(_,t)=>{const w=v("a-divider"),p=v("a-card");return C(),h(p,{title:"父组件"},{default:n(()=>[e(Se,{title:s.value,count:l.value,onUpdateCount:r},null,8,["title","count"]),e(w),x("div",null,"父组件的计算是："+P(l.value),1)]),_:1})}}}),et=N({__name:"DemoPage4",setup(o){const s=le();re();const l=()=>{s.push({name:"demo"})},r=()=>{s.push({path:"demo3",query:{id:1}})};return ue((_,t)=>{debugger}),(_,t)=>{const w=v("a-button");return C(),k("div",null,[e(w,{onClick:l},{default:n(()=>[...t[0]||(t[0]=[m("前往demo1",-1)])]),_:1}),e(w,{onClick:r},{default:n(()=>[...t[1]||(t[1]=[m("前往demo3并带参数",-1)])]),_:1})])}}}),j=[{id:1,name:"张三",email:"zhangsan@example.com",isActive:!0},{id:2,name:"李四",email:"lisi@example.com",isActive:!1}];async function Ae(){return await new Promise(o=>setTimeout(o,300)),j}async function xe(o){await new Promise(l=>setTimeout(l,200));const s={id:Date.now(),isActive:!0,...o};return j.push(s),s}const De=ie("user",{state:()=>({users:[],currentUser:null,loading:!1,count:0}),getters:{activeUsers:o=>o.users.filter(s=>s.isActive),userCount:o=>o.users.length,getUserById:o=>s=>o.users.find(l=>l.id===s)},actions:{setUsers(o){this.users=o},async fetchUsers(){this.loading=!0;try{const o=await Ae();this.users=o}catch(o){throw console.error("获取用户失败:",o),o}finally{this.loading=!1}},async addUser(o){const s=await xe(o);return this.users.push(s),s},increment(){this.count++}}}),he={key:0},Pe={key:1},tt=N({__name:"DemoPage5",setup(o){const s=De(),{users:l,loading:r,userCount:_}=de(s),{fetchUsers:t,addUser:w}=s,p=async()=>{await t()};return(g,i)=>(C(),k("div",null,[x("h2",null,"用户列表 ("+P(D(_))+")",1),D(r)?(C(),k("div",he,"加载中...")):(C(),k("ul",Pe,[(C(!0),k(L,null,M(D(l),f=>(C(),k("li",{key:f.id},P(f.name),1))),128))])),x("button",{onClick:p},"刷新")]))}}),Ne={class:"coupon-basic-setting"},ze={key:1,class:"relative-days"},Re=N({__name:"DemoPage6",setup(o){const s={style:{width:"100px"}},l={span:14},r=I({name:"",type:"cash",limitType:"none",amount:null,obtainType:"free",receiveRange:[T(),T().add(7,"day")],useDateMode:"fixed",useRange:[T(),T().add(30,"day")],validDays:7,skuScope:"all"});return(_,t)=>{const w=v("a-input"),p=v("a-form-item"),g=v("a-typography-link"),i=v("a-space"),f=v("a-select-option"),d=v("a-select"),a=v("a-input-number"),u=v("a-radio"),c=v("a-radio-group"),y=v("YDatePickerRange"),S=v("a-form");return C(),k("div",Ne,[t[34]||(t[34]=x("div",{class:"coupon-basic-setting__title"},"基础设置",-1)),e(S,{"label-col":s,"wrapper-col":l,layout:"horizontal",autocomplete:"off"},{default:n(()=>[e(p,{label:"券名称：",required:""},{default:n(()=>[e(w,{value:r.value.name,"onUpdate:value":t[0]||(t[0]=b=>r.value.name=b),placeholder:"请输入券名称",style:{width:"320px"}},null,8,["value"])]),_:1}),e(p,{label:"适用门店：",required:""},{default:n(()=>[e(i,null,{default:n(()=>[e(g,null,{default:n(()=>[...t[10]||(t[10]=[m("选择门店",-1)])]),_:1}),t[11]||(t[11]=x("span",{class:"field-tip"},"（仅示例，不真正选择）",-1))]),_:1})]),_:1}),e(p,{label:"券类型：",required:""},{default:n(()=>[e(d,{value:r.value.type,"onUpdate:value":t[1]||(t[1]=b=>r.value.type=b),placeholder:"请选择券类型",style:{width:"200px"}},{default:n(()=>[e(f,{value:"cash"},{default:n(()=>[...t[12]||(t[12]=[m("抵现券",-1)])]),_:1}),e(f,{value:"discount"},{default:n(()=>[...t[13]||(t[13]=[m("折扣券",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{label:"抵现金额：",required:""},{default:n(()=>[e(i,{align:"center"},{default:n(()=>[e(d,{value:r.value.limitType,"onUpdate:value":t[2]||(t[2]=b=>r.value.limitType=b),style:{width:"96px"}},{default:n(()=>[e(f,{value:"none"},{default:n(()=>[...t[14]||(t[14]=[m("无门槛",-1)])]),_:1}),e(f,{value:"full"},{default:n(()=>[...t[15]||(t[15]=[m("满额可用",-1)])]),_:1})]),_:1},8,["value"]),t[16]||(t[16]=x("span",null,"可抵扣",-1)),e(a,{value:r.value.amount,"onUpdate:value":t[3]||(t[3]=b=>r.value.amount=b),min:0,precision:2,style:{width:"120px"}},null,8,["value"]),t[17]||(t[17]=x("span",null,"元",-1))]),_:1})]),_:1}),e(p,{label:"获取方式：",required:""},{default:n(()=>[e(c,{value:r.value.obtainType,"onUpdate:value":t[4]||(t[4]=b=>r.value.obtainType=b)},{default:n(()=>[e(u,{value:"free"},{default:n(()=>[...t[18]||(t[18]=[m("免费领取",-1)])]),_:1}),e(u,{value:"activity"},{default:n(()=>[...t[19]||(t[19]=[m("活动赠送或第三方渠道",-1)])]),_:1}),e(u,{value:"sale"},{default:n(()=>[...t[20]||(t[20]=[m("定价售卖",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{label:"领取日期：",required:""},{default:n(()=>[e(i,{align:"center"},{default:n(()=>[e(y,{value:r.value.receiveRange,"onUpdate:value":t[5]||(t[5]=b=>r.value.receiveRange=b),style:{width:"360px"},format:"YYYY-MM-DD"},null,8,["value"]),e(g,null,{default:n(()=>[t[21]||(t[21]=m(" 更多时间设置 ",-1)),e(D(G),{style:{"font-size":"12px","margin-left":"4px"}})]),_:1})]),_:1})]),_:1}),e(p,{label:"使用日期：",required:""},{default:n(()=>[e(i,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[e(c,{value:r.value.useDateMode,"onUpdate:value":t[6]||(t[6]=b=>r.value.useDateMode=b)},{default:n(()=>[e(u,{value:"fixed"},{default:n(()=>[...t[22]||(t[22]=[m("固定日期",-1)])]),_:1}),e(u,{value:"relative"},{default:n(()=>[...t[23]||(t[23]=[m("相对有效期",-1)])]),_:1})]),_:1},8,["value"]),r.value.useDateMode==="fixed"?(C(),h(i,{key:0,align:"center"},{default:n(()=>[e(y,{value:r.value.useRange,"onUpdate:value":t[7]||(t[7]=b=>r.value.useRange=b),style:{width:"360px"},format:"YYYY-MM-DD"},null,8,["value"]),e(g,null,{default:n(()=>[t[24]||(t[24]=m(" 更多时间设置 ",-1)),e(D(G),{style:{"font-size":"12px","margin-left":"4px"}})]),_:1})]),_:1})):(C(),k("div",ze,[t[25]||(t[25]=m(" 自领取之日起 ",-1)),e(a,{value:r.value.validDays,"onUpdate:value":t[8]||(t[8]=b=>r.value.validDays=b),min:1,precision:0,style:{width:"80px"}},null,8,["value"]),t[26]||(t[26]=m(" 天内有效 ",-1))]))]),_:1})]),_:1}),e(p,{label:"参与的商品：",required:""},{default:n(()=>[e(c,{value:r.value.skuScope,"onUpdate:value":t[9]||(t[9]=b=>r.value.skuScope=b),class:"sku-scope-group"},{default:n(()=>[e(u,{value:"all"},{default:n(()=>[...t[27]||(t[27]=[m("全店所有商品",-1)])]),_:1}),e(u,{value:"tag"},{default:n(()=>[...t[28]||(t[28]=[m("标签所属商品",-1)])]),_:1}),e(u,{value:"category"},{default:n(()=>[...t[29]||(t[29]=[m("分类所属商品",-1)])]),_:1}),e(u,{value:"指定商品"},{default:n(()=>[t[30]||(t[30]=m(" 指定商品 ",-1)),e(D(H),{style:{"margin-left":"4px",color:"#999"}})]),_:1}),e(u,{value:"brand"},{default:n(()=>[t[31]||(t[31]=m(" 指定品牌 ",-1)),e(D(H),{style:{"margin-left":"4px",color:"#999"}})]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{colon:!1,label:" "},{default:n(()=>[t[33]||(t[33]=m(" 不参与的商品",-1)),e(g,{type:"secondary"},{default:n(()=>[...t[32]||(t[32]=[m(" 展开",-1)])]),_:1})]),_:1})]),_:1})])}}}),at=F(Re,[["__scopeId","data-v-8906a722"]]),Te={class:"table-column-setting"},Ue={class:"table-column-setting__title"},Le={class:"table-column-setting__grid"},$e={class:"table-column-setting__footer"},Ee=N({__name:"TableColumnSetting",props:{columns:{},checkedKeys:{},title:{default:"自定义表格字段"}},emits:["confirm"],setup(o,{emit:s}){const l=o,r=s,_=I(!1),t=I([]),w=R(()=>{const g=l.columns.map(i=>({...i}));return g.length%2!==0&&g.push({key:`__placeholder__-${g.length}`,label:"",disabled:!0,defaultHidden:!0,isPlaceholder:!0}),g});E(()=>l.checkedKeys,g=>{t.value=[...g]},{immediate:!0});const p=()=>{r("confirm",t.value),_.value=!1};return(g,i)=>{const f=v("a-checkbox"),d=v("a-checkbox-group"),a=v("a-button"),u=v("a-space"),c=v("a-popover");return C(),h(c,{open:_.value,"onUpdate:open":i[2]||(i[2]=y=>_.value=y),trigger:"click",placement:"bottomLeft","overlay-class-name":"table-column-setting-popover"},{content:n(()=>[x("div",Te,[x("div",Ue,P(l.title),1),e(d,{value:t.value,"onUpdate:value":i[0]||(i[0]=y=>t.value=y),class:"table-column-setting__group"},{default:n(()=>[x("div",Le,[(C(!0),k(L,null,M(w.value,y=>(C(),k("div",{key:y.key,class:me(["table-column-setting__grid-item",{"table-column-setting__grid-item--placeholder":y.isPlaceholder}])},[y.isPlaceholder?U("",!0):(C(),h(f,{key:0,value:y.key,disabled:y.disabled},{default:n(()=>[m(P(y.label),1)]),_:2},1032,["value","disabled"]))],2))),128))])]),_:1},8,["value"]),x("div",$e,[e(u,null,{default:n(()=>[e(a,{onClick:i[1]||(i[1]=y=>_.value=!1)},{default:n(()=>[...i[3]||(i[3]=[m("关闭",-1)])]),_:1}),e(a,{type:"primary",onClick:p},{default:n(()=>[...i[4]||(i[4]=[m("保存",-1)])]),_:1})]),_:1})])])]),default:n(()=>[ce(g.$slots,"default",{},()=>[e(a,{type:"text",size:"small",class:"table-column-setting__trigger"},{default:n(()=>[e(D(pe))]),_:1})],!0)]),_:3},8,["open"])}}}),Fe=F(Ee,[["__scopeId","data-v-dfcaf4ab"]]),Ye=o=>{if(typeof window>"u")return null;try{const s=window.localStorage.getItem(o);if(!s)return null;const l=JSON.parse(s);return Array.isArray(l)?l.filter(r=>typeof r=="string"):null}catch{return null}},Ve=(o,s)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(o,JSON.stringify(s))}catch{}},O=o=>{if(o.key)return String(o.key);if(o.dataIndex)return Array.isArray(o.dataIndex)?o.dataIndex.join("."):String(o.dataIndex);throw new Error("Column key is required when using useTableColumnSetting.")},Be=o=>o.settingLabel?o.settingLabel:typeof o.title=="string"?o.title:O(o),Oe=({columns:o,storageKey:s})=>{const l=I(o),r=R(()=>l.value.filter(u=>u.enableSetting!==!1).map(u=>({key:O(u),label:Be(u),disabled:!!u.settingDisabled,defaultHidden:!!u.defaultHidden}))),_=R(()=>r.value.map(u=>u.key)),t=R(()=>{const u=r.value.filter(c=>!c.defaultHidden).map(c=>c.key);return u.length?u:_.value}),w=u=>{if(!_.value.length)return[];const c=r.value.filter(b=>b.disabled).map(b=>b.key),y=u.filter(b=>_.value.includes(b)),S=y.length?y:t.value;return Array.from(new Set([...S,...c]))},p=Ye(s),g=I(w(p??t.value));E(r,()=>{g.value=w(g.value)}),E(g,u=>{Ve(s,u)},{deep:!0});const i=R(()=>l.value.filter(u=>{if(u.enableSetting===!1)return!0;const c=O(u);return g.value.includes(c)})),f=R(()=>r.value.map(({key:u,label:c,disabled:y,defaultHidden:S})=>({key:u,label:c,disabled:y,defaultHidden:S})));return{visibleColumns:i,columnSettingItems:f,checkedKeys:g,updateCheckedKeys:u=>{g.value=w(u)},resetColumns:()=>{g.value=w(t.value)}}},Me={class:"table-column-demo"},qe={key:0,class:"table-column-demo__column-setting"},Ge=N({__name:"TableColumnSettingDemo",setup(o){const l=I([{id:1,name:"Cynthia",phone:"13800000000",status:"active",level:"铂金",balance:520.5,points:880},{id:2,name:"Leo",phone:"13900000000",status:"inactive",level:"金卡",balance:200,points:120},{id:3,name:"Maggie",phone:"13600000000",status:"active",level:"黑金",balance:9999,points:5560},{id:4,name:"Joey",phone:"13500000000",status:"active",level:"银卡",balance:60,points:90},{id:5,name:"Elena",phone:"13700000000",status:"inactive",level:"普卡",balance:10,points:15}]),r=[{title:"序号",key:"__index__",width:80,align:"center",enableSetting:!1},{title:"会员姓名",dataIndex:"name",key:"name",width:140},{title:"手机号",dataIndex:"phone",key:"phone",width:160},{title:"状态",dataIndex:"status",key:"status",width:120},{title:"会员等级",dataIndex:"level",key:"level",width:120},{title:"余额",dataIndex:"balance",key:"balance",width:120,align:"right"},{title:"积分",dataIndex:"points",key:"points",width:120,align:"right"}],{visibleColumns:_,columnSettingItems:t,checkedKeys:w,updateCheckedKeys:p}=Oe({columns:r,storageKey:"demo-table-column-setting"});return(g,i)=>{const f=v("a-badge"),d=v("a-table"),a=v("a-card");return C(),k("div",Me,[e(a,{title:"表格列自定义 Demo"},{default:n(()=>[i[0]||(i[0]=x("p",{class:"table-column-demo__desc"},[m(" 该页面展示了 "),x("code",null,"useTableColumnSetting"),m(" Hook 与 "),x("code",null,"TableColumnSetting"),m(" 组件的组合用法，可以直接在头部弹窗里控制列显隐。 ")],-1)),e(d,{columns:D(_),"data-source":l.value,size:"middle","row-key":"id",pagination:!1},{headerCell:n(({column:u})=>[u.key==="__index__"?(C(),k("div",qe,[e(Fe,{columns:D(t),"checked-keys":D(w),onConfirm:D(p)},null,8,["columns","checked-keys","onConfirm"])])):U("",!0)]),bodyCell:n(({column:u,text:c,index:y})=>[u.key==="__index__"?(C(),k(L,{key:0},[m(P(y+1),1)],64)):u.key==="status"?(C(),h(f,{key:1,status:c==="active"?"success":"default",text:c==="active"?"启用":"停用"},null,8,["status","text"])):u.key==="balance"||u.key==="points"?(C(),k(L,{key:2},[m(P(Number(c).toLocaleString()),1)],64)):U("",!0)]),_:1},8,["columns","data-source"])]),_:1})])}}}),nt=F(Ge,[["__scopeId","data-v-4eea4a43"]]);export{Xe as D,nt as T,F as _,be as a,_e as b,Ze as c,Je as d,We as e,Qe as f,Ke as g,et as h,tt as i,at as j,je as p};
