# 🚀 简化版编辑器测试快速开始

**创建时间：** 2025-12-14  
**目标：** 5 分钟快速测试简化版编辑器

---

## 📍 第 1 步：打开测试页面

### **方式 1：直接访问（推荐）**
```
访问 URL：http://localhost:3000/dashboard/theater/test-simplified-editor
```

### **方式 2：从菜单导航**
```
1. 打开应用
2. 进入"剧场管理"模块
3. 找到"测试简化版编辑器"菜单项
```

---

## 🧪 第 2 步：测试三个场景

### **场景 1：简化版数据（新格式）**⭐

**测试目标：** 验证简化版数据结构

**步骤：**
1. 页面加载后，默认已选中"简化版数据"场景
2. 查看编辑器显示的数据统计：
   - ✅ 楼层数：2（1F, 2F）
   - ✅ 座位数：519
   - ✅ 舞台数：1
   - ✅ 可用座位：519
3. 查看座区列表：
   - ✅ 池座A区（200座）
   - ✅ 池座B区（144座）
   - ✅ 楼座A区（75座）
4. 切换楼层标签：
   - ✅ 点击"1F"查看第一楼层座位
   - ✅ 点击"2F"查看第二楼层座位
5. 查看座位列表表格：
   - ✅ 检查排号、座号、座区、位置等信息

**预期结果：**
- ✅ 所有数据正确显示
- ✅ 座区信息从座位的 `zone` 字段提取
- ✅ 控制台无错误

---

### **场景 2：旧版数据（测试迁移）**🔄

**测试目标：** 验证旧版数据自动迁移

**步骤：**
1. 在页面顶部的"测试场景"下拉框中，选择"旧版数据（测试迁移）"
2. **关键：打开浏览器控制台** (F12)
3. 查看控制台输出，应该看到迁移日志：
   ```
   [数据迁移] 检测到旧版数据，自动迁移...
   [数据迁移] 开始迁移旧版数据...
   [数据迁移] 迁移完成！
   [数据迁移] 座位数量: 344, 楼层数量: 1, 舞台数量: 1
   ```
4. 查看编辑器显示的数据统计：
   - ✅ 楼层数：1（1F）
   - ✅ 座位数：344
   - ✅ 舞台数：1
5. 查看座区列表：
   - ✅ 池座A区（200座）
   - ✅ 池座B区（144座）
6. 检查座位列表表格：
   - ✅ 座位的 `zone` 字段显示座区名称
   - ✅ 排号、座号保持不变
   - ✅ 位置坐标保持不变

**预期结果：**
- ✅ 控制台输出迁移日志
- ✅ 旧版座区名称正确转换为 `zone` 字段
- ✅ 走道信息被忽略（不显示）
- ✅ 座位数量、位置、编号保持不变
- ✅ 舞台信息正确保留

---

### **场景 3：空数据（新建剧场）**🆕

**测试目标：** 验证新建剧场流程

**步骤：**
1. 在"测试场景"下拉框中，选择"空数据（新建剧场）"
2. 查看编辑器显示的数据统计：
   - ✅ 楼层数：1（1F）
   - ✅ 座位数：0
   - ✅ 舞台数：0
3. 点击"批量生成座位"按钮
4. 在弹出的配置窗口中设置：
   - 起始位置：X=100, Y=100
   - 起始排号：1
   - 起始座号：1
   - 排数：5
   - 每排座位数：10
   - 排间距：15
   - 座间距：10
   - 座区名称：测试区
5. 点击"生成座位"按钮
6. 查看编辑器数据更新：
   - ✅ 座位数：50
   - ✅ 座区列表出现"测试区（50座）"
7. 查看座位列表表格：
   - ✅ 排号：1-5
   - ✅ 座号：1-10
   - ✅ 座区：测试区

**预期结果：**
- ✅ 批量生成功能正常
- ✅ 座位数量正确（5排 x 10座 = 50座）
- ✅ 座位编号连续
- ✅ 座区名称正确设置

---

## 🎮 第 3 步：测试交互功能

### **撤销/重做测试**

**步骤：**
1. 在"空数据"场景中，生成 50 个座位（参考场景3）
2. 点击"撤销"按钮
3. 观察座位列表：应该回到 0 个座位
4. 点击"重做"按钮
5. 观察座位列表：应该恢复到 50 个座位

**预期结果：**
- ✅ 撤销功能正常
- ✅ 重做功能正常
- ✅ 按钮状态正确（没有历史时按钮禁用）

---

### **清空座位测试**

**步骤：**
1. 在有座位的场景中，点击"清空所有座位"按钮
2. 观察座位数量变为 0

**预期结果：**
- ✅ 清空功能正常
- ✅ 提示消息显示

---

### **数据导出测试**

**步骤：**
1. 在"简化版数据"场景中
2. 点击"打印完整数据到控制台"按钮
3. 打开控制台 (F12)，查看输出的完整 JSON 数据
4. 点击"导出 JSON"按钮
5. 检查下载的 JSON 文件

**预期结果：**
- ✅ 控制台正确输出完整数据
- ✅ JSON 文件成功下载
- ✅ JSON 格式正确（包含 floors, seats, stages 等字段）

---

## ✅ 第 4 步：检查结果

### **核心验证点：**

- [ ] **数据迁移功能正常**
  - 旧版数据能够自动迁移
  - 座区转换为 zone 字段
  - 走道被忽略
  - 座位数量、位置、编号保持不变

- [ ] **数据结构简化成功**
  - 只保留 floors、seats、stages
  - 删除了 zones、aisles、rows 数组
  - 座区变成座位的属性

- [ ] **核心功能正常**
  - 批量生成座位
  - 撤销/重做
  - 楼层切换
  - 数据统计
  - 数据导出

- [ ] **性能表现良好**
  - 500+ 座位加载流畅
  - 批量生成响应快速
  - 无明显卡顿

---

## 🐛 发现问题？

### **报告流程：**

1. **记录问题详情**
   - 问题描述
   - 复现步骤
   - 预期行为 vs 实际行为
   - 截图或控制台日志

2. **填写测试报告**
   - 打开 `/components/theater/seat-map-editor/SIMPLIFICATION_TEST_RESULTS.md`
   - 在对应部分填写测试结果
   - 在"Bug 列表"部分记录问题

3. **设置严重程度**
   - 高：影响核心功能，阻塞测试
   - 中：影响部分功能，可以继续测试
   - 低：UI 或提示问题，不影响功能

---

## 🎉 测试通过标准

### **最低标准（MVP）**

- ✅ 数据迁移功能正常（控制台有日志，数据转换正确）
- ✅ 批量生成功能正常（能够生成座位，编号正确）
- ✅ 撤销/重做功能正常
- ✅ 楼层切换功能正常
- ✅ 数据统计显示正确
- ✅ 无严重 Bug（高优先级 Bug 数 = 0）

### **理想标准（Full Pass）**

- ✅ 所有场景测试通过
- ✅ 所有功能测试通过
- ✅ 性能测试通过
- ✅ 无任何 Bug（Bug 总数 = 0）

---

## 🚀 下一步

### **如果测试通过：**
1. 填写完整的测试报告
2. 开始集成完整的 Canvas 和交互功能
3. 进行阶段 2 的开发（Canvas 渲染、拖拽等）

### **如果测试失败：**
1. 记录所有问题到测试报告
2. 修复高优先级 Bug
3. 重新测试

---

## 📞 需要帮助？

### **检查清单：**

1. **浏览器控制台是否打开？**
   - 按 F12 打开开发者工具
   - 切换到"Console"标签

2. **路由是否正确配置？**
   - 检查 `/pages/dashboard/theater/test-simplified-editor/route.ts`
   - 确认路由已注册

3. **依赖是否安装？**
   - 运行 `npm install` 确保所有依赖已安装

---

**预计测试时间：** 5-10 分钟  
**推荐测试顺序：** 场景 1 → 场景 2 → 场景 3 → 交互功能  
**最快验证：** 只测试场景 2（数据迁移）即可验证核心功能

---

**开始测试吧！🎯**
