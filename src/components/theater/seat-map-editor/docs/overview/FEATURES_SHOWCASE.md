# 🎨 阶段 3 功能展示指南

**版本：** 1.0  
**目的：** 展示所有阶段 3 功能的使用方法

---

## 📖 功能导览

### **🎯 1. 单座位工具（精确添加）**

**功能：** 在画布上精确添加单个座位

**使用方法：**
1. 点击左侧工具栏的"单座位"工具 或 按键盘 `S`
2. 在画布上点击要添加座位的位置
3. 在弹窗中填写座位信息：
   - 楼层：选择座位所在楼层
   - 座区：选择座位所在座区
   - 排号：座位的排号（1-999）
   - 座号：座位的座号（1-999）
   - 状态：可售/已售/锁定/维修
   - 类型：标准/VIP/情侣座/轮椅座
4. 点击"确定"完成添加

**演示场景：**
- 添加独立的贵宾座
- 添加临时加座
- 修正现有座位的位置

**快捷键：** `S`

---

### **📦 2. 批量框选（多选工具）**

**功能：** 快速选中多个座位进行批量操作

**使用方法：**
1. 点击左侧工具栏的"选择"工具 或 按键盘 `V`
2. 在画布上按住鼠标左键拖拽，绘制选择框
3. 释放鼠标，框内的座位全部被选中（黄色边框）
4. 底部状态栏显示"已选中 N 个座位"

**演示场景：**
- 选中一排座位进行对齐
- 选中一个区域的座位进行移动
- 选中多个座位进行批量删除

**快捷键：** 
- `V` - 切换到选择工具
- `Ctrl/Cmd + A` - 全选所有座位
- `Esc` - 取消选择

---

### **🎯 3. 座位拖拽移动**

**功能：** 自由拖拽座位到任意位置

**使用方法：**
1. 选中一个或多个座位
2. 按住鼠标左键在座位上拖拽
3. 座位跟随鼠标移动（半透明预览）
4. 释放鼠标，座位移动到新位置（自动网格吸附）

**演示场景：**
- 调整单个座位的位置
- 批量移动一排座位
- 重新布局整个座区

**特性：**
- ✅ 自动网格吸附（20px 网格）
- ✅ 实时预览
- ✅ 多座位同时移动
- ✅ 底部状态栏显示实时坐标

---

### **📐 4. 对齐和分布工具**

**功能：** 快速对齐和均匀分布多个座位

**使用方法：**

#### **对齐工具（至少选中 2 个座位）**
1. 选中多个座位
2. 点击顶部工具栏的对齐按钮：
   - **左对齐** - 对齐到最左边座位
   - **水平居中** - 对齐到水平中心
   - **右对齐** - 对齐到最右边座位
   - **顶对齐** - 对齐到最上边座位
   - **垂直居中** - 对齐到垂直中心
   - **底对齐** - 对齐到最下边座位

#### **分布工具（至少选中 3 个座位）**
1. 选中多个座位
2. 点击顶部工具栏的分布按钮：
   - **水平分布** - 均匀分布水平间距
   - **垂直分布** - 均匀分布垂直间距

**演示场景：**
- 对齐一排座位
- 均匀分布不规则的座位
- 快速整理座位布局

**提示：** 也可以通过右键菜单 → "对齐"访问

---

### **📋 5. 复制粘贴**

**功能：** 快速复制座位到新位置

**使用方法：**

#### **方式 1：复制粘贴**
1. 选中一个或多个座位
2. 按 `Ctrl/Cmd + C` 复制（或右键 → "复制"）
3. 按 `Ctrl/Cmd + V` 粘贴（或右键 → "粘贴"）
4. 新座位出现在原位置偏移 20px 处

#### **方式 2：快速复制**
1. 选中一个或多个座位
2. 按 `Ctrl/Cmd + D` 快速复制（或右键 → "快速复制"）
3. 新座位立即创建（无需先复制）

**演示场景：**
- 快速创建对称布局
- 复制一排座位到另一个位置
- 批量复制座位创建大型座区

**快捷键：**
- `Ctrl/Cmd + C` - 复制
- `Ctrl/Cmd + V` - 粘贴
- `Ctrl/Cmd + D` - 快速复制

---

### **🔢 6. 批量重新编号**

**功能：** 批量修改座位的排号和座号

**使用方法：**
1. 选中多个座位（至少 2 个）
2. 右键点击 → "重新编号"
3. 在弹窗中配置：
   - **编号方向**：
     - 水平优先 - 从左到右，从上到下
     - 垂直优先 - 从上到下，从左到右
   - **起始排号**：第一个座位的排号（1-999）
   - **起始座号**：第一个座位的座号（1-999）
   - **排号递增**：每排的排号递增值（1-10）
   - **座号递增**：每列的座号递增值（1-10）
4. 点击"确定"完成编号

**演示场景：**
- 重新编号整个座区
- 修正错误的座位编号
- 统一编号规则

**示例：**

**水平优先（起始 1-1）：**
```
1-1  1-2  1-3
2-1  2-2  2-3
3-1  3-2  3-3
```

**垂直优先（起始 1-1）：**
```
1-1  2-1  3-1
1-2  2-2  3-2
1-3  2-3  3-3
```

---

### **⌨️ 7. 键盘快捷键**

**功能：** 快速访问常用功能

#### **工具切换**
- `V` - 选择工具
- `S` - 单座位工具
- `Z` - 座区工具
- `A` - 走道工具
- `T` - 舞台工具
- `R` - 排座工具

#### **编辑操作**
- `Delete` / `Backspace` - 删除选中元素
- `Ctrl/Cmd + C` - 复制
- `Ctrl/Cmd + V` - 粘贴
- `Ctrl/Cmd + D` - 快速复制
- `Ctrl/Cmd + A` - 全选
- `Esc` - 取消选择

#### **撤销重做**
- `Ctrl/Cmd + Z` - 撤销
- `Ctrl/Cmd + Shift + Z` - 重做

#### **视图控制**
- `Ctrl/Cmd + =` - 放大画布
- `Ctrl/Cmd + -` - 缩小画布
- `Ctrl/Cmd + 0` - 重置缩放

**提示：** Mac 用户使用 `Cmd`，Windows/Linux 用户使用 `Ctrl`

---

### **⏮️ 8. 撤销/重做**

**功能：** 安全地回退或恢复操作

**使用方法：**
- 按 `Ctrl/Cmd + Z` 撤销上一步操作
- 按 `Ctrl/Cmd + Shift + Z` 重做下一步操作

**支持的操作：**
- ✅ 添加座位
- ✅ 删除座位
- ✅ 移动座位
- ✅ 对齐座位
- ✅ 分布座位
- ✅ 复制粘贴座位
- ✅ 批量编号

**特性：**
- 最多保存 50 条历史记录
- 短时间内的连续操作自动合并（300ms）
- 执行新操作时清空重做历史

**演示场景：**
- 尝试不同的布局方案
- 快速回退错误操作
- 对比不同的编辑结果

---

### **🖱️ 9. 右键菜单**

**功能：** 快速访问上下文相关的操作

**使用方法：**
1. 选中元素（座位、座区等）
2. 右键点击
3. 从菜单中选择操作

#### **单座位右键菜单**
- 编辑属性
- 复制
- 粘贴
- 快速复制
- 锁定
- 删除

#### **多座位右键菜单**
- 复制
- 粘贴
- 快速复制
- 对齐（子菜单）
  - 左对齐
  - 水平居中
  - 右对齐
  - 顶对齐
  - 垂直居中
  - 底对齐
- 重新编号
- 删除

#### **空白处右键菜单**
- 粘贴

**演示场景：**
- 快速访问对齐工具
- 快速编号操作
- 便捷的删除操作

---

## 🎬 完整工作流演示

### **场景 1：创建标准座位布局**

1. **创建基础网格**
   - 使用"排座工具"创建 10x10 座位网格
   - 自动生成编号 1-1 到 10-10

2. **添加特殊座位**
   - 按 `S` 切换到单座位工具
   - 在后排添加 2 个 VIP 座位
   - 在前排添加 2 个轮椅座位

3. **调整布局**
   - 按 `V` 切换到选择工具
   - 框选中间 3 排座位
   - 拖拽向后移动 40px（制造过道空间）

4. **对齐座位**
   - 框选每一排座位
   - 点击"左对齐"按钮
   - 所有座位整齐对齐

5. **复制区块**
   - 框选左侧 5 列座位
   - 按 `Ctrl/Cmd + D` 快速复制
   - 拖拽到右侧位置

6. **重新编号**
   - 框选右侧新复制的座位
   - 右键 → "重新编号"
   - 设置起始座号为 6

7. **保存**
   - 点击"保存"按钮
   - 座位图数据保存完成

---

### **场景 2：快速调整现有布局**

1. **全选座位**
   - 按 `Ctrl/Cmd + A` 全选

2. **整体移动**
   - 拖拽任意座位
   - 所有座位一起移动到新位置

3. **撤销**
   - 按 `Ctrl/Cmd + Z` 撤销移动
   - 恢复原始位置

4. **局部调整**
   - 框选部分座位
   - 执行对齐和分布操作

5. **验证结果**
   - 如果满意，继续下一步
   - 如果不满意，按 `Ctrl/Cmd + Z` 撤销

---

### **场景 3：批量编号整理**

1. **选中需要重新编号的座位**
   - 框选整个座区（如 5x5 = 25 个座位）

2. **打开编号弹窗**
   - 右键 → "重新编号"

3. **配置编号规则**
   - 方向：水平优先
   - 起始排号：1
   - 起始座号：1
   - 排号递增：1
   - 座号递增：1

4. **应用编号**
   - 点击"确定"
   - 座位按规则重新编号

5. **验证结果**
   - 检查编号是否正确
   - 如有问题，按 `Ctrl/Cmd + Z` 撤销后重新配置

---

## 💡 使用技巧

### **提示 1：使用快捷键提升效率**
- 常用工具（V、S）切换快捷键
- 编辑操作（Ctrl+C、Ctrl+V）
- 撤销重做（Ctrl+Z、Ctrl+Shift+Z）

### **提示 2：善用框选和批量操作**
- 框选多个座位后统一调整
- 使用对齐和分布工具快速整理
- 批量复制节省时间

### **提示 3：撤销是你的安全网**
- 大胆尝试不同布局
- 随时撤销回到之前状态
- 对比不同方案

### **提示 4：右键菜单更便捷**
- 快速访问常用操作
- 无需移动鼠标到工具栏
- 上下文相关的菜单项

### **提示 5：网格吸附保持整齐**
- 拖拽座位自动吸附到网格
- 保持布局整齐有序
- 20px 网格适合大多数场景

---

## 🚀 进阶技巧

### **技巧 1：组合快捷键快速复制**
```
Ctrl/Cmd + D → 拖拽 → Ctrl/Cmd + D → 拖拽
```
快速创建多个间隔相等的座位

### **技巧 2：对齐 + 分布创建完美布局**
```
框选座位 → 左对齐 → 垂直分布
```
创建整齐的一排座位

### **技巧 3：撤销前保存关键状态**
- 完成重要布局后，先保存
- 然后尝试新方案
- 不满意可以撤销或重新加载

### **技巧 4：批量操作顺序**
```
1. 批量排座（创建基础网格）
2. 框选调整（移动和对齐）
3. 单座位工具（添加特殊座位）
4. 批量编号（统一编号规则）
```

---

## ❓ 常见问题

### **Q1：为什么撤销不了某些操作？**
**A：** 撤销只支持座位操作，不支持座区、走道、舞台的操作。

### **Q2：如何快速创建对称布局？**
**A：** 框选左侧座位 → 复制粘贴 → 拖拽到右侧 → 重新编号。

### **Q3：批量编号后座位位置会变化吗？**
**A：** 不会，批量编号只修改排号和座号，不改变座位位置。

### **Q4：如何取消选择所有座位？**
**A：** 按 `Esc` 键或在空白处点击（不拖拽）。

### **Q5：拖拽时为什么座位会吸附？**
**A：** 这是网格吸附功能，帮助保持布局整齐，座位会自动吸附到 20px 网格。

---

## 📚 总结

阶段 3 提供了完整的座位精确编辑能力：

- **🎯 单座位工具** - 精确添加
- **📦 批量框选** - 快速多选
- **🎯 拖拽移动** - 自由布局
- **📐 对齐分布** - 整齐排列
- **📋 复制粘贴** - 快速复制
- **🔢 批量编号** - 统一编号
- **⌨️ 快捷键** - 高效操作
- **⏮️ 撤销重做** - 安全编辑
- **🖱️ 右键菜单** - 便捷访问

掌握这些功能，你可以高效地创建和编辑任何复杂的座位图！🎉
