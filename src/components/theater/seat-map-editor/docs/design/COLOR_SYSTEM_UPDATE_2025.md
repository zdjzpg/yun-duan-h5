# 座区颜色系统更新（2025 版本）
**更新时间：** 2025-12-23  
**更新内容：** 基于最新品牌色系统（2025 版本），更新座区颜色色板和座位填充逻辑。

---

## 一、更新背景

### 1. 品牌色系统已更新

Pospal Design 品牌色系统已更新，**IB4（静蓝）和 MNB4（幻夜蓝）不再是同一颜色**：

- **旧版本：** IB4 = MNB4 = `#85a5ff`（相同）  
- **新版本：** IB4 = `#3B79E3`，MNB4 = `#4C3FC4`（不同）

现在品牌色系统包含 **完整的 12 个唯一 4 级色**。

### 2. 用户需求

1. 更新座区色板：使用最新的 12 个品牌 4 级色。  
2. 去掉填充透明度：座位填充色直接使用座区颜色（不再半透明）。

---

## 二、更新内容

### 1. 座区颜色色板（12 个 2025 版 4 级颜色）

#### 更新前（旧版本）

```ts
export const ZONE_PRESET_COLORS = [
  '#26a6eb', // B4 - 蓝色
  '#47c464', // G4 - 绿色
  '#f74848', // R4 - 红色
  '#ff9e3d', // O4 - 橙色
  '#ffd666', // AY4 - 琥珀黄（旧值）
  '#fff566', // Y4 - 黄色（旧值）
  '#d3f261', // LG4 - 浅绿（旧值）
  '#5cdbd3', // C4 - 青色（旧值）
  '#85a5ff', // IB4 - 静蓝（旧值，与 MNB4 相同）
  '#b37feb', // P4 - 紫色（旧值）
  '#ff85c0', // M4 - 洋红（旧值）
  // MNB4 缺失（因为与 IB4 重复）
]
```

#### 更新后（2025 版本）

```ts
export const ZONE_PRESET_COLORS = [
  '#26a6eb', // B4 - 蓝色（主色系）
  '#47c464', // G4 - 绿色（成功色）
  '#f74848', // R4 - 红色（错误色）
  '#ff9e3d', // O4 - 橙色（警告色）
  '#FFC53D', // AY4 - 琥珀黄（新值）
  '#FFE53D', // Y4 - 黄色（新值）
  '#A2D923', // LG4 - 浅绿（新值）
  '#36CFCF', // C4 - 青色（新值）
  '#3B79E3', // IB4 - 静蓝（新值）
  '#4C3FC4', // MNB4 - 幻夜蓝（新增，与 IB4 不同）
  '#9D56E3', // P4 - 紫色（新值）
  '#EB54A7', // M4 - 洋红（新值）
]
```

#### 颜色对比表

| 颜色名称       | 旧版值      | 新版值      | 变化   |
|----------------|-------------|-------------|--------|
| B4（蓝色）     | `#26a6eb`   | `#26a6eb`   | 不变   |
| G4（绿色）     | `#47c464`   | `#47c464`   | 不变   |
| R4（红色）     | `#f74848`   | `#f74848`   | 不变   |
| O4（橙色）     | `#ff9e3d`   | `#ff9e3d`   | 不变   |
| AY4（琥珀黄）  | `#ffd666`   | `#FFC53D`   | 更新   |
| Y4（黄色）     | `#fff566`   | `#FFE53D`   | 更新   |
| LG4（浅绿）    | `#d3f261`   | `#A2D923`   | 更新   |
| C4（青色）     | `#5cdbd3`   | `#36CFCF`   | 更新   |
| IB4（静蓝）    | `#85a5ff`   | `#3B79E3`   | 更新   |
| MNB4（幻夜蓝） | （缺失）    | `#4C3FC4`   | 新增   |
| P4（紫色）     | `#b37feb`   | `#9D56E3`   | 更新   |
| M4（洋红）     | `#ff85c0`   | `#EB54A7`   | 更新   |

---

### 2. 座位填充逻辑（去掉透明度）

#### 更新前（带透明度）

```ts
function getSeatFillColor(seat: Seat): string {
  // 1. 票档颜色（演出场景）
  if (seat.priceTierColor) {
    return hexToRgba(seat.priceTierColor, 0.15) // 15% 透明
  }

  // 2. 座区颜色（场馆场景）
  if (seat.zoneColor) {
    return hexToRgba(seat.zoneColor, 0.15) // 15% 透明
  }

  // ... 其他逻辑
}
```

#### 更新后（不透明纯色）

```ts
function getSeatFillColor(seat: Seat): string {
  // 1. 票档颜色（演出场景）
  if (seat.priceTierColor) {
    return seat.priceTierColor
  }

  // 2. 座区颜色（场馆场景）
  if (seat.zoneColor) {
    return seat.zoneColor
  }

  // ... 其他逻辑
}
```

**效果预期：**

- 座位显示鲜明的纯色填充（不透明）。  
- 座区之间对比度更高，不会“灰一片”。

---

## 三、视觉对比与可读性

### 1. 颜色分布更均衡

新版 12 个颜色的色相分布：

- 红色系：R4、O4、M4  
- 黄色系：AY4、Y4  
- 绿色系：G4、LG4  
- 青色系：C4  
- 蓝色系：B4、IB4、MNB4  
- 紫色系：P4  

色相跨度更大，座区之间更容易区分。

### 2. 文本可读性

- 深色座区：自动使用白色文字。  
- 浅色座区：自动使用深色文字。  
- 对比度目标：**WCAG AA ≥ 4.5:1**。

---

## 四、更新涉及文件

| 文件路径                                                           | 更新内容                               |
|--------------------------------------------------------------------|----------------------------------------|
| `src/components/theater/seat-map-editor/utils/constants.ts`        | 更新 `ZONE_PRESET_COLORS` 为 12 个新版颜色 |
| `src/components/theater/seat-map-editor/canvas/color.utils.ts`     | 更新 `getSeatFillColor` 去掉透明度逻辑     |

---

## 五、测试建议

### 场景 1：创建座区并检查颜色

1. 打开座位图编辑器。  
2. 选中多组座位，分别创建不同颜色的座区（红 / 绿 / 蓝 / 紫等）。  
3. 预期：座位显示鲜明的纯色填充，不透明，颜色与座区色板一致。

### 场景 2：对比新旧颜色差异

1. 对照旧版截图或描述，检查 AY4 / Y4 / LG4 / IB4 / P4 / M4 等颜色。  
2. 预期：新版颜色更鲜明，饱和度更高，区分度更清晰。

### 场景 3：验证对比度

1. 创建深色座区（例如 P4、MNB4 等）。  
2. 创建浅色座区（例如 AY4、Y4 等）。  
3. 预期：深色座区显示白色文字，浅色座区显示深色文字，所有文字均清晰可读，对比度 ≥ 4.5:1。

---

## 六、核心优势

### 1. 品牌一致性

- 使用 Pospal Design 最新品牌色（2025 版）。  
- 所有颜色与设计规范完全同步。  
- 包含完整的 12 个唯一颜色（IB4 ≠ MNB4）。

### 2. 视觉更清晰

- 去掉透明度，填充色更鲜明。  
- 座区之间对比度高，易于识别。  
- 色彩饱和度更高，视觉效果更好。

### 3. 无障碍友好

- 所有颜色对比度目标 ≥ 4.5:1（WCAG AA）。  
- 文本颜色自动选择深 / 浅方案。  
- 描边颜色通过 HSL 调整亮度，增强边缘识别。

### 4. 色相分布均衡

- 覆盖红、橙、黄、绿、青、蓝、紫完整色相。  
- 12 个颜色色相跨度大，不易混淆。  
- 冷暖色调均衡，适配不同业务场景。

---

## 七、相关文档

- `COLOR_SYSTEM_COMPLETED.md` – 颜色系统初版说明。  
- `DESIGN_PRINCIPLES.md` – 设计原则与常见误区。  
- WCAG 对比度标准：https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html

---

## 八、更新状态

| 功能                | 状态     | 备注                       |
|---------------------|----------|----------------------------|
| 12 个品牌 4 级色    | 已完成   | 2025 最新版本              |
| IB4 ≠ MNB4          | 已验证   | 现在是不同颜色             |
| 去掉填充透明度       | 已完成   | 座位颜色更鲜明             |
| 描边颜色计算         | 已完成   | 使用 HSL 降低亮度 10%      |
| 对比度测试           | 已完成   | 目标 WCAG AA ≥ 4.5:1      |

---

**更新完成：** 已上线  
**测试状态：** 待更多业务场景验证  
**维护者：** AI 助手  
**版本：** 2025-12-23

